---
# Copyright (c) 2020-2021 Jakob Meng, <jakobmeng@web.de>
# vim:set fileformat=unix tabstop=2 shiftwidth=2 expandtab:
# kate: end-of-line unix; space-indent on; indent-width 2; remove-trailing-spaces modified;

- name: Add/Modify/Remove OpenStack block storage volumes
  loop: "{{ openstack_volumes|default([]) }}"
  openstack.cloud.volume: "{{ item
    |combine({} if 'auth' in item else {'auth': openstack_auth})
    |combine({} if 'cloud' in item else {'cloud': openstack_cloud})
    |combine({} if 'interface' in item else {'interface': openstack_interface})
  }}"
  register: openstack_volume_result

- name: Debug role variables
  debug:
    msg:
      openstack_volume_result: '{{ openstack_volume_result }}'
  tags:
    - never
    - debug
